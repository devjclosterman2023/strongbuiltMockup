!function(e){"use strict";var t=function(t){var a={action:"aiovg_set_cookie",security:aiovg_player.ajax_nonce};e.post(aiovg_player.ajax_url,a,function(e){e.success&&t()})};function a(t){if("aiovg_videos"==t.post_type){var a={action:"aiovg_update_views_count",post_id:t.post_id,security:aiovg_player.views_nonce};e.post(aiovg_player.ajax_url,a,function(e){})}}window.onmessage=function(t){"aiovg-cookie-consent"==t.data&&e(".aiovg-player-iframe iframe").each(function(){var t=e(this).attr("src");if(-1===t.indexOf("refresh=1")){var a=t.indexOf("?")>-1?"&":"?";e(this).attr("src",t+a+"refresh=1")}})},e(function(){e(".aiovg-player-raw").each(function(){var t;a(e(this).data("params"))}),e(".aiovg-player-standard").each(function(){var o,n,i,r;n=(o=e(this)).data("id"),i=o.data("params"),r=function(){if("iframe"==i.type){var t=o.data("src");e("#"+n).replaceWith('<iframe src="'+t+'" width="560" height="315" frameborder="0" scrolling="no" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>'),a(i)}else{var r=document.getElementById(n),c=new Plyr(r,i.player),l=o.find(".plyr");o.trigger("player.init",{player_id:n,player:c,settings:i});var s=!1;if(c.on("playing",function(e){s||(s=!0,a(i))}),c.on("ended",function(){l.addClass("plyr--stopped")}),i.hasOwnProperty("hls")){let p=new Hls;p.loadSource(i.hls),p.attachMedia(r),window.hls=p,c.on("languagechange",()=>{setTimeout(()=>p.subtitleTrack=c.currentTrack,50)})}if(i.hasOwnProperty("dash")){let d=dashjs.MediaPlayer().create();d.initialize(r,i.dash,!0),window.dash=d}if(i.hasOwnProperty("share")||i.hasOwnProperty("embed")){var f=document.createElement("button");f.type="button",f.className="plyr__controls__item plyr__control plyr__share-embed-button aiovg-icon-share",l.append(f);var g=e(f),y=o.find(".plyr__share-embed-modal-close-button"),u=o.find(".plyr__share-embed-modal");u.appendTo(l).show();var h=!1;g.on("click",function(){c.playing?(h=!0,c.pause()):h=!1,g.hide(),u.addClass("fadein")}),y.on("click",function(){h&&c.play(),u.removeClass("fadein"),setTimeout(function(){g.show()},500)}),i.hasOwnProperty("embed")&&o.find(".plyr__embed-code-input").on("focus",function(){e(this).select(),document.execCommand("copy")})}if(i.hasOwnProperty("logo")){var m="bottom:50px; left:"+i.logo.margin+"px;";switch(i.logo.position){case"topleft":m="top:"+i.logo.margin+"px; left:"+i.logo.margin+"px;";break;case"topright":m="top:"+i.logo.margin+"px; right:"+i.logo.margin+"px;";break;case"bottomright":m="bottom:50px; right:"+i.logo.margin+"px;"}var v=document.createElement("div");v.className="plyr__logo",v.innerHTML='<a href="'+i.logo.link+'" style="'+m+'" target="_blank"><img src="'+i.logo.image+'" alt="" /></a>',l.append(v)}if(i.hasOwnProperty("contextmenu")){e("#aiovg-contextmenu").length||e("body").append('<div id="aiovg-contextmenu" style="display: none;"><div class="aiovg-contextmenu-content">'+i.contextmenu.content+"</div></div>");var w=document.getElementById("aiovg-contextmenu"),x="";l.on("contextmenu",function(e){if(3===e.keyCode||3===e.which){e.preventDefault(),e.stopPropagation();var t=w.offsetWidth,a=w.offsetHeight,o=e.pageX,n=e.pageY,i=document.documentElement,r=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),c=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),l=o+t>window.innerWidth+r?o-t:o,s=n+a>window.innerHeight+c?n-a:n;w.style.display="",w.style.left=l+"px",w.style.top=s+"px",clearTimeout(x),x=setTimeout(function(){w.style.display="none"},1500)}}),i.hasOwnProperty("logo")&&w.addEventListener("click",function(){window.location.href=i.logo.link}),document.addEventListener("click",function(){w.style.display="none"})}}},i.cookie_consent?(o.find(".aiovg-privacy-consent-button").on("click",function(){e(this).html("..."),"iframe"!=i.type&&(i.player.autoplay=!0),t(function(){r(),o.find(".aiovg-privacy-wrapper").remove(),e(".aiovg-player-standard").trigger("cookieConsent",{player_id:n})})}),o.on("cookieConsent",function(e,t){n!=t.player_id&&(r(),o.find(".aiovg-privacy-wrapper").remove())})):r()})})}(jQuery);